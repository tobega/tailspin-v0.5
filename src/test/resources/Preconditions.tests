---Failing precondition throws PreconditionFailed
foo templates
requires <|=3>
1 !
end foo

2 -> foo !
=*PreconditionFailed
---Passing precondition works
foo templates
requires <|=3>
1 !
end foo

3 -> foo !
=1
---Failing precondition depends on outer scope value
foo templates
  max is $;
  bar templates
  requires <|..$max>
    1 !
  end bar
  7 -> bar !
end foo

6 -> foo !
=*PreconditionFailed
---Passing precondition depends on outer scope value
foo templates
  max is $;
  bar templates
  requires <|..$max>
    1 !
  end bar
  7 -> bar !
end foo

8 -> foo !
=1
---Failing precondition on inline templates
2 -> templates
       requires <|=3>
       1 !
     end !
=*PreconditionFailed
---Try on template call inhibits precondition error
foo templates
requires <|=2>
  3!
end foo

[1 -> try foo] !
=[]
---Try on inline template call inhibits precondition error
[1 -> try templates
          requires <|=2>
            3!
          end] !
=[]
